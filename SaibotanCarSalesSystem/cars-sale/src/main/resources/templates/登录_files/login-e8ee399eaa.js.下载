"use strict";$(function(){var t,s,e,i,n;$("input[type='text'],input[type='password']").focus(function(){$("input[type='button']").attr("disabled",!1).addClass("u-btn-deepred").removeClass("u-btn-disabled")}),SSO_PC.adSystem(".J-ad-system",slideShowOps),t=".J-tabs-content",s="active",e="click",i="0",(n=$("#J-tab-nav li")).removeClass(s),n.eq(i).addClass(s),$(t).hide(),$(t).eq(i).show(),n.on(e,function(){n.removeClass(s),$(this).addClass(s);var e=n.index(this);$(t).hide(),$(t).eq(e).show(),SSO_PC.resetForm(),SSO_PC.resetGeetest(a,o,l),$(".J-form-item").addClass("none"),Geetest_flag=!1,$(".submit").attr("disabled",!0).addClass("u-btn-disabled").removeClass("u-btn-deepred")}),$(".makecode").on("click",function(){SSO_PC.ajaxImgcode($(this).closest(".J-tabs-content"))}),$(".error-empty").on("click",function(){$(this).siblings("input").val("").focus()});var a="",o="",l="",c="";$("#isPhone").bind("input propertychange",function(){c=$(this).val();/^\d{11}$/.test(c)&&(0==Geetest_flag?SSO_PC.isNeedGeetest($("#login_form"),$("#isPhone"),$("#submit")):SSO.resetCaptcha())}),$("#submit").on("click",function(){$(".agree-label-login").hasClass("active")?SSO.btnClick($("#login_form"),$(this),"u-btn-disabled","u-btn-deepred"):dialog({title:"消息",content:"阅读并同意 《车巴巴用户隐私保护协议》",okValue:"确定",fixed:!0,ok:function(){}}).width(400).showModal()}),$("#phone").bind("input propertychange",function(){c=$(this).val();/^\d{11}$/.test(c)&&(0==Geetest_flag?SSO_PC.isNeedGeetest($("#post_form"),$("#phone"),$("#submit-mobile")):SSO.resetCaptcha())}),$("#submit-mobile").on("click",function(){$(".agree-label-mobile").hasClass("active")?SSO.btnClick($("#post_form"),$(this),"u-btn-disabled","u-btn-deepred"):dialog({title:"消息",content:"阅读并同意 《车巴巴用户隐私保护协议》",okValue:"确定",fixed:!0,ok:function(){}}).width(400).showModal()}),$("#login_form").validate({rules:{default_phone:{required:!0,number:!0,minlength:11},default_password:{required:!0,maxlength:20,minlength:6}},messages:{default_phone:{required:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号',number:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号',minlength:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号'},default_password:{required:'<i class="cbb cbb-exclamation-circle"></i>请输入密码',minlength:'<i class="cbb cbb-exclamation-circle"></i>密码不少于6位',maxlength:'<i class="cbb cbb-exclamation-circle"></i>密码不多于20位'}},errorPlacement:function(e,t){e.appendTo(t.parents(".J-tabs-content").find(".error-tips-content")),SSO_PC.showErrors($("#submit"))},success:function(e){var t=e.attr("id").split("-")[0];$("#"+t).removeClass("focus").siblings(".error-empty").addClass("none")},submitHandler:function(e){var t={cellphone:function(){return $("#isPhone").val()},password:function(){return $("#isPassword").val()}};a=$("#login_form .geetest_form input[name=geetest_challenge]").val(),o=$("#login_form .geetest_form input[name=geetest_seccode]").val(),l=$("#login_form .geetest_form input[name=geetest_validate]").val(),a&&o&&l&&(t.geetest_challenge=a,t.geetest_seccode=o,t.geetest_validate=l),t.returnUrl=return_url||"/",1==formFlag&&SSO_PC.ajaxForm(t,$("#submit"),"/sso/api/loginsubmitwithcellphonepassword",$("#login_form"),$("#isPhone"))},onkeyup:!1}),$("#post_form").validate({rules:{name:{required:!0,number:!0,minlength:11},sms_captcha:{required:!0,minlength:4,maxlength:4}},messages:{name:{required:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号',number:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号',minlength:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号'},sms_captcha:{required:'<i class="cbb cbb-exclamation-circle"></i>请输入四位短信动态码',minlength:'<i class="cbb cbb-exclamation-circle"></i>请输入四位短信动态码',maxlength:'<i class="cbb cbb-exclamation-circle"></i>请输入四位短信动态码'}},errorPlacement:function(e,t){e.appendTo(t.parents(".J-tabs-content").find(".error-tips-content")),SSO_PC.showErrors($("#submit-mobile"))},success:function(e){var t=e.attr("id").split("-")[0];$("#"+t).removeClass("focus").siblings(".error-empty").addClass("none")},submitHandler:function(e){var t={cellphone:function(){return $("#phone").val()},verifySmsCode:function(){return $("#sms_captcha").val()}};a=$("#post_form .geetest_form input[name=geetest_challenge]").val(),o=$("#post_form .geetest_form input[name=geetest_seccode]").val(),l=$("#post_form .geetest_form input[name=geetest_validate]").val(),a&&o&&l&&(t.geetest_challenge=a,t.geetest_seccode=o,t.geetest_validate=l),t.returnUrl=return_url||"/",1==formFlag&&SSO_PC.ajaxForm(t,$("#submit-mobile"),"/sso/api/loginsubmitwithcellphonesmscode",$("#post_form"),$("#phone"))},onkeyup:!1}),$(".J-general-login").keydown(function(){13==event.keyCode&&SSO.btnClick($("#login_form"),$(".sso-login-btn"),"u-btn-disabled","u-btn-deepred")}),$(".J-dynamic-login").keydown(function(){13==event.keyCode&&SSO.btnClick($("#post_form"),$(".sso-login-btn"),"u-btn-disabled","u-btn-deepred")}),$(".agree-label").on("click",function(){$(this).hasClass("active")?($(this).removeClass("active"),$("#submit").attr("disabled",!0).addClass("u-btn-disabled").removeClass("u-btn-deepred")):($(this).addClass("active"),$("#submit").attr("disabled",!1).addClass("u-btn-deepred").removeClass("u-btn-disabled"))})});