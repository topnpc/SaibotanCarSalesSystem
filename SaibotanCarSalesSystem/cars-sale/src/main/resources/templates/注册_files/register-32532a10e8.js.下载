"use strict";$(function(){jQuery.validator.addMethod("letters_name",function(e,t){return this.optional(t)||/^[A-Za-z0-9\u4e00-\u9fa5_-]+$/i.test(e)&&!/^\d+$/.test(e)},"Letters only please");var e="#default";$(".nc-register-mode .tabs-nav li a").click(function(){$(this).attr("href")!==e&&(e=$(this).attr("href"),$(""+e).find(".makecode").trigger("click"))}),$("input[type='text'],input[type='password']").focus(function(){$(".agree-label").hasClass("active")&&$("input[type='button']").attr("disabled",!1).addClass("u-btn-deepred").removeClass("u-btn-disabled")}),$(".makecode").on("click",function(){SSO_PC.ajaxImgcode()}),$(".error-empty").on("click",function(){$(this).siblings("input").val("").focus()}),$(".agree-label").on("click",function(){$(this).hasClass("active")?($(this).removeClass("active"),$("#registerBtn").attr("disabled",!0).addClass("u-btn-disabled").removeClass("u-btn-deepred")):($(this).addClass("active"),$("#registerBtn").attr("disabled",!1).addClass("u-btn-deepred").removeClass("u-btn-disabled"))});var a="",s="",i="";$("#phone").bind("input propertychange",function(){var e=$(this).val();/^\d{11}$/.test(e)&&function(e,t){dndc.ajax({url:"/sso/api/iscellphonevalid",type:"post",data:{cellphone:function(){return e.val()}},doneCallback:function(e){0!==e.code?dialog({title:"消息",content:e.message,okValue:"确定",fixed:!0,ok:function(){SSO_PC.resetForm(),SSO.resetCaptcha()}}).width(400).showModal():t&&t()}})}($(this),function(){0==Geetest_flag?SSO_PC.isNeedGeetest($("#post_form"),$("#phone"),$("#registerBtn")):SSO.resetCaptcha()})}),$("#registerBtn").on("click",function(){$(".agree-label").hasClass("active")?SSO.btnClick($("#post_form"),$(this),"u-btn-disabled","u-btn-deepred"):dialog({title:"消息",content:"阅读并同意 《车巴巴用户隐私保护协议》",okValue:"确定",fixed:!0,ok:function(){}}).width(400).showModal()}),$("#post_form").validate({errorPlacement:function(e,t){e.appendTo(t.parents(".sso-form").find(".error-tips-content")),SSO_PC.showErrors($("#registerBtn"))},success:function(e){var t=e.attr("id").split("-")[0];$("#"+t).removeClass("focus").siblings(".error-empty").addClass("none")},onkeyup:!1,rules:{name:{required:!0,number:!0,minlength:11},password:{required:!0,maxlength:20,minlength:6},password_confirmation:{required:!0,equalTo:"#sms_password"},sms_captcha:{required:!0,maxlength:4,minlength:4}},messages:{name:{required:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号',number:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号',minlength:'<i class="cbb cbb-exclamation-circle"></i>请输入正确的手机号'},password:{required:'<i class="cbb cbb-exclamation-circle"></i>请输入您的密码',maxlength:'<i class="cbb cbb-exclamation-circle"></i>密码多于20位',minlength:'<i class="cbb cbb-exclamation-circle"></i>密码少于6位'},password_confirmation:{required:'<i class="cbb cbb-exclamation-circle"></i>请再次输入您的密码',equalTo:'<i class="cbb cbb-exclamation-circle"></i>请输入相同的密码'},sms_captcha:{required:'<i class="cbb cbb-exclamation-circle"></i>请输入四位短信动态码',minlength:'<i class="cbb cbb-exclamation-circle"></i>请输入四位短信动态码',maxlength:'<i class="cbb cbb-exclamation-circle"></i>请输入四位短信动态码'}},submitHandler:function(e){if(0<=$("#sms_password").val().indexOf(" "))dialog({title:"消息",content:"密码不可包含空格",okValue:"确定",fixed:!0,ok:function(){}}).width(400).showModal();else{var t={cellphone:function(){return $("#phone").val()},password:function(){return $("#sms_password").val()},password_confirmation:function(){return $("#con_password").val()},verifySmsCode:function(){return $("#sms_captcha").val()}};a=$("#post_form .geetest_form input[name=geetest_challenge]").val(),s=$("#post_form .geetest_form input[name=geetest_seccode]").val(),i=$("#post_form .geetest_form input[name=geetest_validate]").val(),a&&s&&i&&(t.geetest_challenge=a,t.geetest_seccode=s,t.geetest_validate=i),t.returnUrl=return_url||"/",1==formFlag&&SSO_PC.ajaxForm(t,$("#registerBtn"),"/sso/api/addaccount",$("#post_form"),$("#phone"))}}})});